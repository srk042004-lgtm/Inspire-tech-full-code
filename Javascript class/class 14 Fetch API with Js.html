<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Inspire Tech Academy - JS Project 2: Working with Fetch API</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="style.css" />
    <style>
      /* General Layout and Styling */
      .list-group-item.hidden {
        display: none;
      }
      .course-list a.active-link {
        font-weight: bold;
        color: #0d6efd;
      }
      .main-content {
        padding-top: 20px;
      }
      .code-example {
        background-color: #272822;
        color: #f8f8f2;
        padding: 15px;
        border-radius: 5px;
        overflow-x: auto;
        font-family: monospace;
        white-space: pre-wrap;
        margin-bottom: 20px;
      }

      /* Fetch Specific Styles */
      .fetch-box {
        border: 1px solid #fd7e14; /* Orange theme for Fetch */
        border-left: 5px solid #fd7e14;
        padding: 15px;
        border-radius: 5px;
        margin-bottom: 20px;
        background-color: #fff8f0;
      }
      .response-output {
        min-height: 150px;
        background-color: #e9ecef;
        padding: 15px;
        border-radius: 5px;
        font-family: monospace;
        white-space: pre-wrap;
        overflow-x: auto;
      }
    </style>
  </head>

  <body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark sticky-top shadow">
      <div class="container">
        <button
          id="sidebarToggle"
          class="btn btn-outline-light d-lg-none me-2"
          aria-label="Toggle sidebar"
          aria-controls="sidebar"
          aria-expanded="false"
        >
          ‚ò∞
        </button>
        <a class="navbar-brand fw-bold" href="/index.html"
          >Inspire Tech Institute</a
        >
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navMenu"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navMenu">
          <ul class="navbar-nav ms-auto">
            <li class="nav-item">
              <a class="nav-link" href="/index.html">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/about.html">About</a>
            </li>
            <li class="nav-item">
              <a class="nav-link active" href="/Class 1 html.html">Courses</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#contact">Contact</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <div id="sidebarBackdrop" class="sidebar-backdrop"></div>

    <div class="container-fluid">
      <div class="row">
        <aside
          id="sidebar"
          class="col-lg-3 col-md-4 bg-light border-end vh-100 overflow-auto p-3 sticky-sidebar"
        >
          <h5 class="fw-bold">Courses</h5>
          <div class="mb-3">
            <input
              type="text"
              id="searchInput"
              class="form-control"
              placeholder="Search topics..."
            />
          </div>

          <div class="accordion" id="coursesAccordion">
            <div class="accordion-item">
              <h2 class="accordion-header">
                <button
                  class="accordion-button"
                  type="button"
                  data-bs-toggle="collapse"
                  data-bs-target="#jsCourse"
                  aria-expanded="true"
                >
                  JavaScript Full Course
                </button>
              </h2>
              <div
                id="jsCourse"
                class="accordion-collapse collapse show"
                data-bs-parent="#coursesAccordion"
              >
                <div class="accordion-body p-0">
                  <ul class="list-group list-group-flush course-list">
                    <li class="list-group-item">
                      <a href="js-ref-async.html" class="text-decoration-none">
                        REF: Callbacks, Promises, Async
                      </a>
                    </li>
                    <li class="list-group-item">
                      <a
                        href="js-project-1-tictactoe.html"
                        class="text-decoration-none"
                      >
                        Project 1: Tic-Tac-Toe Game
                      </a>
                    </li>
                    <li class="list-group-item">
                      <a
                        href="js-project-2-fetch.html"
                        class="text-decoration-none active-link"
                      >
                        **Project 2: Fetch API & HTTP Requests** üåê
                      </a>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </aside>

        <main class="col-lg-9 col-md-8 main-content p-4">
          <section id="js-project-2-fetch" class="mb-5">
            <div class="card shadow-lg border-0">
              <div class="card-body">
                <h3 class="fw-bold mb-3 text-success">
                  üåê JavaScript Project 2: Working with the Fetch API
                </h3>
                <div
                  class="ratio ratio-16x9 mb-4 border border-secondary rounded p-1"
                >
                  <iframe
                    width="560"
                    height="315"
                    src="https://www.youtube.com/embed/CyGodpqcid4?si=a-1ot5qMQnhkxFtl"
                    title="YouTube video player"
                    frameborder="0"
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                    referrerpolicy="strict-origin-when-cross-origin"
                    allowfullscreen
                  ></iframe>
                </div>

                <p>
                  The **Fetch API** is the standard way JavaScript interfaces
                  with network resources (APIs). Every time an application loads
                  data from a server‚Äîbe it a list of products, weather info, or
                  user details‚Äîit uses a tool like Fetch. Mastery of this is key
                  to building dynamic web apps.
                </p>

                <div class="alert alert-info">
                  **Note:** We will use a free, public testing API
                  (`jsonplaceholder.typicode.com`) for all examples.
                </div>

                <hr />

                <h4 class="fw-bold text-primary mb-4 mt-4">
                  PART 1: HTTP GET Requests (Retrieving Data)
                </h4>
                <p>
                  GET requests are the simplest, used to retrieve data from a
                  specified resource.
                </p>

                <h5 class="fw-bold text-orange">
                  A. Basic `GET` Request using `async/await`
                </h5>
                <p>
                  Since `fetch` returns a Promise, we use `async/await` for the
                  cleanest syntax.
                </p>
                <div class="fetch-box">
                  <h6 class="fw-bold text-info">JavaScript Code</h6>
                  <pre class="code-example">
const apiUrl = 'https://jsonplaceholder.typicode.com/posts/1';

async function fetchPostData() {
    try {
        const response = await fetch(apiUrl);
        
        // 1. Always check the response.ok property for network/HTTP errors (e.g., 404, 500)
        if (!response.ok) {
            throw new Error(`HTTP Error! Status: ${response.status}`);
        }
        
        // 2. Extract the JSON body (this is also an async operation!)
        const data = await response.json();

        // Display data in the UI
        document.getElementById('getOutput').textContent = JSON.stringify(data, null, 2);
        
    } catch (error) {
        document.getElementById('getOutput').textContent = `Error: ${error.message}`;
    }
}
                            </pre
                  >
                  <button id="fetchGetBtn" class="btn btn-warning mt-3">
                    Run GET Request
                  </button>
                  <p class="mt-3 fw-bold">Response Output:</p>
                  <pre id="getOutput" class="response-output">
Click the button to fetch data...</pre
                  >
                </div>

                <hr />

                <h4 class="fw-bold text-primary mb-4 mt-5">
                  PART 2: HTTP POST Requests (Sending Data)
                </h4>
                <p>
                  POST requests are used to send data to the server to create a
                  new resource. This requires passing a configuration **options
                  object** to the `fetch` function.
                </p>

                <h5 class="fw-bold text-orange">
                  A. `POST` Request Configuration
                </h5>
                <div class="fetch-box">
                  <h6 class="fw-bold text-info">Configuration Options</h6>
                  <ul class="list-group list-group-flush mb-3">
                    <li class="list-group-item">
                      **`method: 'POST'`**: Specifies the HTTP method.
                    </li>
                    <li class="list-group-item">
                      **`headers`**: Tells the server what kind of data is being
                      sent (e.g., `'Content-Type': 'application/json'`).
                    </li>
                    <li class="list-group-item">
                      **`body`**: The data payload, which must be converted to a
                      JSON string using `JSON.stringify()`.
                    </li>
                  </ul>

                  <h6 class="fw-bold text-info mt-3">JavaScript Code</h6>
                  <pre class="code-example">
async function createNewPost() {
    const newPostData = {
        title: 'New JS Course Post',
        body: 'This post was created using the Fetch API.',
        userId: 1,
    };

    const options = {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify(newPostData),
    };
    
    try {
        const response = await fetch('https://jsonplaceholder.typicode.com/posts', options);
        
        if (!response.ok) {
            throw new Error(`Failed to create resource. Status: ${response.status}`);
        }
        
        const data = await response.json();
        // The mock API returns the new object, usually with an ID assigned by the server
        document.getElementById('postOutput').textContent = JSON.stringify(data, null, 2);
        
    } catch (error) {
        document.getElementById('postOutput').textContent = `Error: ${error.message}`;
    }
}
                            </pre
                  >
                  <button id="fetchPostBtn" class="btn btn-warning mt-3">
                    Run POST Request (Create)
                  </button>
                  <p class="mt-3 fw-bold">
                    Response Output (Should show a new ID, e.g., 101):
                  </p>
                  <pre id="postOutput" class="response-output">
Click the button to send data...</pre
                  >
                </div>

                <hr />

                <h4 class="fw-bold text-primary mb-4 mt-5">
                  PART 3: Error Handling and Status Codes
                </h4>
                <p>
                  The `fetch` API is unusual: it only rejects a promise on a
                  **network failure** (e.g., no internet). It does *not* reject
                  on HTTP error status codes like 404 (Not Found) or 500 (Server
                  Error). We must handle these manually using the `response.ok`
                  property.
                </p>

                <h5 class="fw-bold text-danger">Handling 404 (Not Found)</h5>
                <div class="fetch-box">
                  <h6 class="fw-bold text-info">
                    JavaScript Code (Requesting non-existent post 99999)
                  </h6>
                  <pre class="code-example">
async function fetchWithError() {
    try {
        const response = await fetch('https://jsonplaceholder.typicode.com/posts/99999'); 

        // CRITICAL STEP: Manually check the OK property!
        if (!response.ok) {
            // This code runs for 404, 500, etc.
            throw new Error(`Resource not found! Status: ${response.status}`);
        }
        
        const data = await response.json();
        document.getElementById('errorOutput').textContent = JSON.stringify(data, null, 2);
        
    } catch (error) {
        // This catch block handles both network errors AND our manually thrown HTTP errors
        document.getElementById('errorOutput').textContent = `Request Failed: ${error.message}`;
    }
}
                            </pre
                  >
                  <button id="fetchErrorBtn" class="btn btn-danger mt-3">
                    Run Error Request (404)
                  </button>
                  <p class="mt-3 fw-bold">Response Output:</p>
                  <pre id="errorOutput" class="response-output">
Click the button to test error handling...</pre
                  >
                </div>
              </div>
            </div>
          </section>

          <div class="container text-center my-5">
            <a href="/js-ref-async.html" class="btn btn-secondary me-2"
              >‚¨Ö Back to Async Reference</a
            >
            <a href="/index.html" class="btn btn-primary"
              >Finalize Course & Home üè†</a
            >
          </div>
        </main>
      </div>
    </div>

    <footer id="contact" class="bg-dark text-white text-center p-3 mt-4">
      <div class="container">
        <p class="mb-1">üìç Inspire Tech Institute | Nowshera, Pakistan</p>
        <p class="mb-1">üìû 0346-2345453 | ‚úâ info@inspiretech.com</p>
        <p>Follow us on Facebook, Instagram & YouTube</p>
      </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      document
        .getElementById("fetchGetBtn")
        .addEventListener("click", fetchPostData);
      document
        .getElementById("fetchPostBtn")
        .addEventListener("click", createNewPost);
      document
        .getElementById("fetchErrorBtn")
        .addEventListener("click", fetchWithError);

      // --- PART 1: GET Request Logic ---
      async function fetchPostData() {
        const apiUrl = "https://jsonplaceholder.typicode.com/posts/1";
        try {
          const response = await fetch(apiUrl);

          if (!response.ok) {
            throw new Error(`HTTP Error! Status: ${response.status}`);
          }

          const data = await response.json();
          document.getElementById("getOutput").textContent = JSON.stringify(
            data,
            null,
            2
          );
        } catch (error) {
          document.getElementById(
            "getOutput"
          ).textContent = `Error: ${error.message}`;
        }
      }

      // --- PART 2: POST Request Logic ---
      async function createNewPost() {
        const newPostData = {
          title: "New JS Course Post",
          body: "This post was created using the Fetch API.",
          userId: 1,
        };

        const options = {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify(newPostData),
        };

        try {
          const response = await fetch(
            "https://jsonplaceholder.typicode.com/posts",
            options
          );

          if (!response.ok) {
            throw new Error(
              `Failed to create resource. Status: ${response.status}`
            );
          }

          const data = await response.json();
          document.getElementById("postOutput").textContent = JSON.stringify(
            data,
            null,
            2
          );
        } catch (error) {
          document.getElementById(
            "postOutput"
          ).textContent = `Error: ${error.message}`;
        }
      }

      // --- PART 3: Error Handling Logic (404) ---
      async function fetchWithError() {
        try {
          // Requesting a non-existent resource
          const response = await fetch(
            "https://jsonplaceholder.typicode.com/posts/99999"
          );

          if (!response.ok) {
            throw new Error(`Resource not found! Status: ${response.status}`);
          }

          const data = await response.json();
          document.getElementById("errorOutput").textContent = JSON.stringify(
            data,
            null,
            2
          );
        } catch (error) {
          document.getElementById(
            "errorOutput"
          ).textContent = `Request Failed: ${error.message}`;
        }
      }
    </script>
    <script src="app.js"></script>
  </body>
</html>
